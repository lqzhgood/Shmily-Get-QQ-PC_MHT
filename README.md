# è¯´æ˜

è¯·å…ˆé˜…è¯» https://github.com/lqzhgood/Shmily

æ­¤å·¥å…·æ˜¯å°† QQ ç”µè„‘ç‰ˆå¯¼å‡ºçš„ `.mht` èŠå¤©è®°å½• è½¬æ¢ä¸º `Shmily-Msg` æ ¼å¼çš„å·¥å…·

å¤„ç†ç”± `mht2html-master` åˆ†å‰²å›¾ç‰‡åçš„ html æ–‡ä»¶ï¼Œè½¬æ¢ä¸º JSONã€‚

!!! æ­¤å·¥å…·ä¸é€‚ç”¨äº QQ NT !!!

## ä½¿ç”¨

!!! æ¯æ¬¡è¿è¡Œä¼šæ¸…ç©ºä¸Šä¸€æ¬¡çš„è¾“å‡ºæ–‡ä»¶å¤¹ ( `.\dist` å’Œ `.\mht\output` ) !!! <br />

1. ğŸï¸ å®‰è£… node ç¯å¢ƒ [http://lqzhgood.github.io/Shmily/guide/setup-runtime/nodejs.html]
2. ğŸï¸ å®‰è£… php ç¯å¢ƒ [http://lqzhgood.github.io/Shmily/guide/setup-runtime/php.html]

```diff
+ ğŸï¸ 3-9   -->   https://www.bilibili.com/video/BV1Qc411S7Dg/
```

3. ä¸‹è½½æœ¬é¡¹ç›®å¹¶è§£å‹
4. å®‰è£…ä¾èµ– [http://lqzhgood.github.io/Shmily/guide/setup-runtime/nodejs-dependencies.html]
5. é€šè¿‡ `QQè‡ªå¸¦çš„æ¶ˆæ¯ç®¡ç†å™¨` å¯¼å‡º `.mht` æ–‡ä»¶, æ”¾å…¥ `input`

    - (å¯é€‰) ä» [PC_Clipboard](https://github.com/lqzhgood/Shmily-Get-QQ-PC_Clipboard) æ›´æ–° [face.json](https://raw.githubusercontent.com/lqzhgood/Shmily-Get-QQ-PC_Clipboard/main/temp/face.json) æ”¾å…¥ input ä¸­ `./input/face.json`

        > QQ å¯¼å‡º mht ä¸­åŒ…å«äº†å›¾ç‰‡ç­‰èµ„æºçš„ base64, ä¼šä½¿ç”¨ `.\lib\mht.js` åˆ†ç¦» html å’Œ å›¾ç‰‡æ–‡ä»¶åˆ° `.\dist` <br /> å…¶ä¸­å›¾ç‰‡èµ„æºæ–‡ä»¶ä¼šä»¥ md5 åå­—å‘½å
        >
        > [PC_Clipboard](https://github.com/lqzhgood/Shmily-Get-QQ-PC_Clipboard) çš„ [face.json](https://raw.githubusercontent.com/lqzhgood/Shmily-Get-QQ-PC_Clipboard/main/temp/face.json) ä¸­åŒ…å« MD5 å’Œ è¡¨æƒ…æè¿°çš„æ˜ å°„, é€šè¿‡è¿™ä¸ªæ˜ å°„è¡¨ä¼šå¡«å…… mht ç”¨åˆ°è¡¨æƒ…çš„æè¿°ç”¨äºç»Ÿè®¡ <br />

6. ä¿®æ”¹ `config.js`

    ```
    // ç”¨äºä» mht åŒ¹é…æ¶ˆæ¯
    direction.name.go å¡«å†™ è‡ªå·± ç”¨è¿‡çš„æ˜µç§°
    direction.name.come å¡«å†™ å¯¹æ–¹ ç”¨è¿‡çš„æ˜µç§°

    // ç”¨äºåœ¨ Shmily æ˜¾ç¤ºæ¶ˆæ¯
    rightNum è‡ªå·±çš„ QQ å·ç 
    rightName è‡ªå·±çš„æ˜µç§°
    leftNum å¯¹æ–¹çš„ QQ å·ç 
    leftName å¯¹æ–¹çš„æ˜µç§°
    ```
7. è¿è¡Œç¨‹åº `npm run build`
8. åœ¨ `dist` æ–‡ä»¶å¤¹è·å– `æ•°æ®æ–‡ä»¶` å’Œ `èµ„æºæ–‡ä»¶`
9. (å¯é€‰ å¤§éƒ¨åˆ†æƒ…å†µä¸‹ç”¨ä¸åˆ°) é€šè¿‡ [Shmily-Get-QQ-PC_utils](https://github.com/lqzhgood/Shmily-Get-QQ-PC_utils) ä¿®å¤ä¸€äº›é—®é¢˜

### æ–‡ä»¶å¤¹ç»“æ„

```
    -\
    - node_modules                          <--- é¡¹ç›®ä¾èµ–
    - input                                 <--- å¦‚æœæ²¡æœ‰è¿™ä¸ªæ–‡ä»¶å¤¹åˆ™æ–°å»º
        - face.json                         <--- (å¯é€‰) è¡¨æƒ…æè¿°
        - xxx.mht                           <--- QQèŠå¤©è®°å½•å¯¼å‡ºçš„ `.mht` æ”¾åˆ°è¿™é‡Œ
    - dist
        - data                              <--- æ•°æ®æ–‡ä»¶(å¤¹)
            - $rootPath                     <--- ç”± `config.js` è®¾ç½®
        - QQ_PC_MHT-12345678-20230101.json  <--- èµ„æºæ–‡ä»¶
        - ...                               <--- å…¶ä»–è¿‡ç¨‹æ–‡ä»¶åŠæ—¥å¿—
    - config.js
    - index.js
    - package.json
    - README.md
    - ...
```

## æ³¨æ„

### ï¼ä¸¢å¤±æ¶ˆæ¯ï¼

ä»¥ä¸‹ç±»å‹ä¸ä¼šå‡ºç°åœ¨ QQ å¯¼å‡ºçš„ MHT æ–‡ä»¶ä¸­, æ‰€ä»¥æ— æ³•è·å–

> ä¸€äº›ç±»å‹çš„ç¤ºä¾‹å¯ä»¥åœ¨ `can't get type` ä¸­æŸ¥çœ‹

```
- æœ¬åœ°å›¾ç‰‡ä¸å­˜åœ¨çš„ä¸ä¼šæ˜¾ç¤ºã€‚(ç©ºå›¾ç‰‡å ä½)
- è§†é¢‘ä¸ä¼šæ˜¾ç¤º
- å‘é€è¿‡å»çš„æ–‡ä»¶æ¶ˆæ¯ä¸ä¼šæ˜¾ç¤º(å¯¹æ–¹æ¥æ”¶ä¿¡æ¯ä¼šæ˜¾ç¤º)
- è‡ªå·±æ¥æ”¶çš„æ–‡ä»¶æ¶ˆæ¯ä¸ä¼šæ˜¾ç¤º
- è¯­éŸ³ä¸ä¼šæ˜¾ç¤º

```

### æ¶ˆæ¯ä¹±ç ä¸æ­£ç¡®

æœ‰äº›å†…å®¹è§£æå‡ºæ¥ä¸æ­£ç¡®,ä¼šä¹±ç , å¦‚ä¸‹ (ç¬¬äºŒè¡Œ // ä¸ºä¸ªäººæ¨æµ‹çš„æ­£ç¡®ç»“æœ)

```
[QQç»å…¸-æŠ é¼»]? è¿™ä¸ª ? ä»£è¡¨è¿™ä¸ªè¡¨æƒ…è§£æé”™è¯¯ï¼Œ ? åº”è¯¥æ˜¯æŸä¸ªæ— æ³•è§£æçš„åŠå­—ç¬¦
// [QQç»å…¸-æŠ é¼»]? ->  [QQç»å…¸-å¯æ€œ]  //id msg-qq_s60.json_2011-09-16_11-00-20_53e5b5_1


[QQ ç»å…¸-æŠ é¼»]ç¸… è¿™ä¸ª ç¸… ä»£è¡¨è¿™ä¸ªè¡¨æƒ…è§£æé”™è¯¯ï¼Œ è¿™é‡Œæœ‰ä¸¤ä¸ªè¡¨æƒ…, åé¢çš„è¡¨æƒ…å› ä¸ºå‰é¢è¡¨æƒ…çš„åŠä¸ªå­—ç¬¦æ²¡æœ‰è§£æå‡ºæ¥ å˜æˆäº† ç¸…
// |[QQ ç»å…¸-æŠ é¼»]ç¸… Â Â | -> [QQ ç»å…¸-å§”å±ˆ][QQç»å…¸-å¤§å“­] //msg-qq-pc.json_2011-11-02_01-03-04_0a2d4a_1


// |[QQ ç»å…¸-æŠ é¼»]åç°?ä¸å¥½åƒ Â Â | -> |[QQ ç»å…¸-å§”å±ˆ] ä¸è¦
ä¸å¥½åƒ| // msg-qq_s60.json_2011-11-18_15-43-24_1df2a6_1


'ã€‚?' -> 'ï½'

```

è¿™åº”è¯¥æ˜¯è…¾è®¯çš„ bugï¼Œå› ä¸ºä» QQ çš„æ¶ˆæ¯ç®¡ç†å™¨é‡Œé¢çœ‹åˆ°çš„å°±æ˜¯é”™è¯¯çš„ï¼ˆ[QQ ç»å…¸-æŠ é¼»]?ï¼‰

åœ¨æˆ‘æ¶ˆæ¯å†å²é‡Œé¢è¿™ä¸ª bug çš„æ—¶é—´è·¨åº¦æ˜¯ `2011-08-15 16:58:38` -> `2011-11-28 10:53:48`

å¯ä»¥é€šè¿‡ [Shmily-Get-QQ-PC_utils](https://github.com/lqzhgood/Shmily-Get-QQ-PC_utils) å»ä¿®å¤è¿™äº›é—®é¢˜

## å¯¹å¤šä¸ª MHT åˆå¹¶å»é‡

å¯èƒ½ä½ åŸæ¥åœ¨å¤šä¸ªæ—¶æ®µå¤‡ä»½äº† .mht çš„æ–‡ä»¶, ç°åœ¨æƒ³åˆå¹¶è¿™äº› .mht æ–‡ä»¶å¹¶å»é‡.

æˆ‘çš„ç»“è®ºæ˜¯ä½ åªèƒ½é€šè¿‡ `Beyond Compare` ç­‰ç±»ä¼¼çš„è½¯ä»¶æ‰‹åŠ¨åˆå¹¶å»é‡äº†. åŸå› å’Œå¯èƒ½å‡ºç°çš„é—®é¢˜å¦‚ä¸‹

#### åˆå¹¶å¤šä¸ªæœ‰æ—¶é—´é‡å çš„ MHT

å› ä¸º MHT å¯¼å‡ºçš„æ¶ˆæ¯åªæœ‰å†…å®¹å’Œæ—¶é—´( YYYY-MM-DD HH:mm:ss) , è¿™ä¸¤é¡¹çš„ç²¾åº¦éƒ½ä¸è¶³ä»¥ä¿è¯æ­¤æ¡æ¶ˆæ¯çš„å”¯ä¸€, å› æ­¤æ— æ³•ç”Ÿæˆç²¾ç¡® ID ç”¨äºåˆå¹¶å»é‡å¤šä¸ª MHT çš„å†…å®¹ï¼Œæ‰€ä»¥åªèƒ½æ‰‹åŠ¨åˆå¹¶.

åšè¿‡ä¸€äº›å°è¯•, ä»£ç åœ¨ `./lib/merge.js`, å› ä¸ºä»¥ä¸ŠåŸå› åºŸå¼ƒ

#### æ— æ³•é€šè¿‡ `Beyond Compare` è¿›è¡Œæ–‡æœ¬å¯¹æ¯”, å› ä¸ºæ¯æ¬¡å¯¼å‡ºçš„ html ä¸ä¸€è‡´

ç”±äº QQ çš„ MHT å¯¼å‡ºæ¯æ¬¡ç”Ÿæˆçš„å›¾ç‰‡åç§°å¦‚ `{790EA64E-D540-4eb0-81C6-053C2098CC0E}.dat` æ˜¯éšæœºæ•°ï¼Œå› æ­¤ msg çš„ html å¹¶ä¸èƒ½ä¸€æ¨¡ä¸€æ ·ï¼Œå¦‚æœéœ€è¦å¯¹æ¯”ä¸¤ä¸ª MHT æ˜¯å¦å†…å®¹ä¸€è‡´, å¯ä»¥è¿‡æ»¤æ‰å›¾ç‰‡åç§°åå†è¿›è¡Œæ¯”è¾ƒ.

è§„åˆ™ --> ä¸é‡è¦çš„æ–‡æœ¬ ---> æ­£åˆ™ `\{.{8}-.{4}-.{4}-.{4}-.{12}\}\.dat`

## æ„Ÿè°¢

http://lqzhgood.github.io/Shmily/guide/other/thanks.html

## æèµ 

ç‚¹å‡»é“¾æ¥ http://lqzhgood.github.io/Shmily/guide/other/donation.html çœ‹ä¸–ç•Œä¸Šæœ€å¯çˆ±çš„åŠ¨ç‰©
